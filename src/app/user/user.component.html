<app-header></app-header>
<app-navigation></app-navigation>
<section class="maincontainer clr">

  <div class="delete-errorinfo" *ngIf="data!=''">
    Data in parent : {{data}}
    <div class="txtleft flt"><img src="images/ErrorInformation.png" class="marginright10" title="Error" /><Span>Delete User Error! Please ensure to revoke account mapping before deleting the user ID. Please try again.</Span></div>
    <div class="txtright frt"><img src="images/CloseInformation.png" title="close" class="closeicon"/></div>
    <br class="clr" />
  </div>

  <div class="createuser test"><a href="#" data-toggle="modal" data-backdrop="static" data-target="#createModal">CREATE USER</a></div>
  <table id="example" class="display userTable" datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" style="width:100%">
      <thead>
          <tr>
              <th>Full Name</th>
              <th class="secondcolumn">Username/Short ID</th>
              <th>Email</th>
              <th>Role</th>
              <th>Account Name</th>
              <th></th>
              <th></th>
              <th></th>
              <th></th>

          </tr>
      </thead>
      <tbody>
          <tr *ngFor="let person of persons">
              <td>{{person.name}}</td>
              <td>{{person.username}}</td>
              <td>{{person.email}}</td>
              <td>{{person.role}}</td>
              <td>{{person.clientName}}</td>
              <td class="accountmap" title="Account Mappting" onclick="document.getElementById('account01').style.display='block'"></td>
              <td class="revokemap" title="Revoke Mapping" onclick="document.getElementById('revoke01').style.display='block'"></td>
              <td class="edit-icon" title="Edit" data-toggle="modal" data-backdrop="static" (click)="onSelectedit(person)" data-target="#editModal"></td>
              <td class="deleteicon" title="Delete" data-toggle="modal"  data-backdrop="static" (click)="onSelect(person)" data-target="#deleteModal"></td>
          </tr>
        </tbody>
      </table>
</section>

<div class="modal right" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel2">
    <div class="modal-dialog" role="document">
       <div class="modal-content">
            <app-changepassword></app-changepassword>
          </div>
        </div>
     </div>

<div class="modal right" id="createModal" tabindex="-1" role="dialog" aria-labelledby="createModalLabe">
  <div class="modal-dialog" role="document">
          <app-createuser></app-createuser>
  </div>
</div>
<div class="modal right" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabe">
  <div class="modal-dialog" role="document">
      <app-edituser
          [name]="name"
          [username]="username"
          [role]="role"
          [email]="email"
          [id]="id">
      </app-edituser>
  </div>
</div>
<div class="modal right" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabe">
  <div class="modal-dialog" role="document">
     <div class="modal-content delete-modal">
      <app-deleteuser
            [name]="name"
            [clientName]="clientName"
            [id]="id"
            (changeEvent)="onDataChange($event)">
    </app-deleteuser>
      </div>
  </div>
</div>
<app-footer></app-footer>
